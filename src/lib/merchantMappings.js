// å•†æˆ¶åç¨±æ˜ å°„è¡¨
// è¼¸å…¥å•†æˆ¶åç¨± â†’ è‡ªå‹•å°æ‡‰å•†æˆ¶é¡åˆ¥

export const merchantMappings = {
  // ğŸ£ å£½å¸/æ—¥æœ¬æ–™ç†
  'å£½å¸éƒ': { category: 'é¤é£²', icon: 'ğŸ£', keywords: ['å£½å¸éƒ', 'sushiro', 'SUSHIRO'] },
  'é­šå±‹': { category: 'é¤é£²', icon: 'ğŸ£', keywords: ['é­šå±‹', 'é­šå±‹'] },
  'æ¿é•·': { category: 'é¤é£²', icon: 'ğŸ£', keywords: ['æ¿é•·', 'æ¿é•·å£½å¸'] },
  'å…ƒæ°£': { category: 'é¤é£²', icon: 'ğŸ£', keywords: ['å…ƒæ°£', 'å…ƒæ°—'] },
  'çˆ­é®®': { category: 'é¤é£²', icon: 'ğŸ£', keywords: ['çˆ­é®®', 'çˆ­é®®è¿´è½‰å£½å¸'] },
  'ç‰›è§’': { category: 'é¤é£²', icon: 'ğŸ–', keywords: ['ç‰›è§’', 'ç‰›è§’ç‡’è‚‰'] },
  'ç‰›æ‰’': { category: 'é¤é£²', icon: 'ğŸ¥©', keywords: ['ç‰›æ‰’', 'ç‰›æ’', 'steak'] },
  'ç‡’è‚‰': { category: 'é¤é£²', icon: 'ğŸ–', keywords: ['ç‡’è‚‰', 'çƒ¤è‚‰', 'yakiniku'] },
  'ç«é‹': { category: 'é¤é£²', icon: 'ğŸ²', keywords: ['ç«é‹', 'hotpot', 'æ¶®æ¶®é‹'] },
  'æµ·åº•æ’ˆ': { category: 'é¤é£²', icon: 'ğŸ²', keywords: ['æµ·åº•æ’ˆ'] },
  'è­šä»”': { category: 'é¤é£²', icon: 'ğŸœ', keywords: ['è­šä»”', 'è­šä»”ä¸‰å“¥', 'è­šä»”é›²å—ç±³ç·š'] },
  'è­šä»”ç±³ç·š': { category: 'é¤é£²', icon: 'ğŸœ', keywords: ['è­šä»”', 'è­šä»”ä¸‰å“¥', 'è­šä»”é›²å—ç±³ç·š'] },
  'é›²å—ç±³ç·š': { category: 'é¤é£²', icon: 'ğŸœ', keywords: ['é›²å—ç±³ç·š', 'éæ©‹ç±³ç·š'] },
  
  // ğŸ” å¿«é¤/é€£é–
  'éº¥ç•¶å‹': { category: 'é¤é£²', icon: 'ğŸ”', keywords: ['éº¥ç•¶å‹', 'mcdonald', 'McDonald', 'MCD'] },
  'MCD': { category: 'é¤é£²', icon: 'ğŸ”', keywords: ['éº¥ç•¶å‹', 'mcdonald', 'McDonald'] },
  'è‚¯å¾·åŸº': { category: 'é¤é£²', icon: 'ğŸ—', keywords: ['è‚¯å¾·åŸº', 'KFC', 'kfc'] },
  'Burger King': { category: 'é¤é£²', icon: 'ğŸ”', keywords: ['burger king', 'Burger King', 'æ¼¢å ¡ç‹'] },
  'Subway': { category: 'é¤é£²', icon: 'ğŸ¥ª', keywords: ['subway', 'Subway', 'è³½ç™¾å‘³'] },
  'å¤§å®¶æ¨‚': { category: 'é¤é£²', icon: 'ğŸš', keywords: ['å¤§å®¶æ¨‚', 'Cafe de Coral'] },
  'å¤§å¿«æ´»': { category: 'é¤é£²', icon: 'ğŸš', keywords: ['å¤§å¿«æ´»', 'Fairwood'] },
  'ç¾å¿ƒ': { category: 'é¤é£²', icon: 'ğŸš', keywords: ['ç¾å¿ƒ', 'MX', 'Maxim'] },
  'å‰é‡å®¶': { category: 'é¤é£²', icon: 'ğŸ›', keywords: ['å‰é‡å®¶', 'Yoshinoya'] },
  
  // ğŸœ ç²‰éºµ/ç²¥å“
  'ç²¥å“': { category: 'é¤é£²', icon: 'ğŸ¥£', keywords: ['ç²¥', 'ç²¥å“', 'ç”Ÿæ»¾ç²¥'] },
  'è¶Šå—æ²³ç²‰': { category: 'é¤é£²', icon: 'ğŸœ', keywords: ['è¶Šå—æ²³ç²‰', 'pho', 'æ²³ç²‰'] },
  'æ‹‰éºµ': { category: 'é¤é£²', icon: 'ğŸœ', keywords: ['æ‹‰éºµ', 'ramen', 'è±šéª¨'] },
  
  // ğŸµ èŒ¶é¤å»³/å’–å•¡
  'èŒ¶é¤å»³': { category: 'é¤é£²', icon: 'â˜•', keywords: ['èŒ¶é¤å»³', 'èŒ¶è¨˜'] },
  'å†°å®¤': { category: 'é¤é£²', icon: 'â˜•', keywords: ['å†°å®¤', 'èŒ¶é¤å»³'] },
  'å¤ªå¹³æ´‹å’–å•¡': { category: 'é¤é£²', icon: 'â˜•', keywords: ['å¤ªå¹³æ´‹å’–å•¡', 'Pacific Coffee'] },
  'æ˜Ÿå·´å…‹': { category: 'é¤é£²', icon: 'â˜•', keywords: ['æ˜Ÿå·´å…‹', 'Starbucks', 'starbucks'] },
  'Starbucks': { category: 'é¤é£²', icon: 'â˜•', keywords: ['æ˜Ÿå·´å…‹', 'Starbucks'] },
  'Blue Bottle': { category: 'é¤é£²', icon: 'â˜•', keywords: ['Blue Bottle', 'è—ç“¶'] },
  'ç‘å¹¸å’–å•¡': { category: 'é¤é£²', icon: 'â˜•', keywords: ['ç‘å¹¸', 'luckin'] },
  'åº«è¿ªå’–å•¡': { category: 'é¤é£²', icon: 'â˜•', keywords: ['åº«è¿ª', 'cotti'] },
  
  // ğŸª è¶…å¸‚/ä¾¿åˆ©åº—
  'ç™¾ä½³': { category: 'è¶…å¸‚', icon: 'ğŸ›’', keywords: ['ç™¾ä½³', 'PARKnSHOP', 'parknshop'] },
  'æƒ åº·': { category: 'è¶…å¸‚', icon: 'ğŸ›’', keywords: ['æƒ åº·', 'Wellcome'] },
  '759': { category: 'è¶…å¸‚', icon: 'ğŸª', keywords: ['759', '759é˜¿ä¿¡å±‹'] },
  'è¯æ½¤': { category: 'è¶…å¸‚', icon: 'ğŸ›’', keywords: ['è¯æ½¤', 'CR Vanguard'] },
  '7-11': { category: 'è¶…å¸‚', icon: 'ğŸª', keywords: ['7-11', '7Eleven', 'seven eleven'] },
  'OKä¾¿åˆ©åº—': { category: 'è¶…å¸‚', icon: 'ğŸª', keywords: ['OK', 'OKä¾¿åˆ©åº—', 'Circle K'] },
  'Circle K': { category: 'è¶…å¸‚', icon: 'ğŸª', keywords: ['OK', 'Circle K'] },
  
  // ğŸ›ï¸ ç¶²ä¸Šè³¼ç‰©
  'æ·˜å¯¶': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ›ï¸', keywords: ['æ·˜å¯¶', 'Taobao', 'æ·˜å¯¶ç¶²'] },
  'å¤©è²“': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ›ï¸', keywords: ['å¤©è²“', 'Tmall'] },
  'äº¬æ±': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ“¦', keywords: ['äº¬æ±', 'JD', 'jd.com'] },
  'Amazon': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ“¦', keywords: ['amazon', 'Amazon', 'äºé¦¬éœ'] },
  'Amazon HK': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ“¦', keywords: ['amazon hk', 'Amazon HK'] },
  'Shopee': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ›ï¸', keywords: ['shopee', 'Shopee', 'è¦çš®'] },
  'Lazada': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ›ï¸', keywords: ['lazada', 'Lazada'] },
  'eBay': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ“¦', keywords: ['ebay', 'eBay'] },
  'Zalora': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ‘—', keywords: ['zalora', 'Zalora'] },
  'HKTVmall': { category: 'ç¶²ä¸Šè³¼ç‰©', icon: 'ğŸ›ï¸', keywords: ['hktvmall', 'HKTVmall', 'é¦™æ¸¯é›»è¦–'] },
  
  // ğŸš— äº¤é€šå‡ºè¡Œ
  'Uber': { category: 'äº¤é€š', icon: 'ğŸš—', keywords: ['uber', 'Uber'] },
  'UberEats': { category: 'é¤é£²', icon: 'ğŸ”', keywords: ['ubereats', 'UberEats'] },
  'Lyft': { category: 'äº¤é€š', icon: 'ğŸš—', keywords: ['lyft', 'Lyft'] },
  'çš„å£«': { category: 'äº¤é€š', icon: 'ğŸš•', keywords: ['çš„å£«', 'taxi'] },
  'æ¸¯éµ': { category: 'äº¤é€š', icon: 'ğŸš‡', keywords: ['æ¸¯éµ', 'MTR', 'mtr'] },
  'MTR': { category: 'äº¤é€š', icon: 'ğŸš‡', keywords: ['æ¸¯éµ', 'MTR'] },
  'ä¹å·´': { category: 'äº¤é€š', icon: 'ğŸšŒ', keywords: ['ä¹å·´', 'KMB'] },
  'åŸå·´': { category: 'äº¤é€š', icon: 'ğŸšŒ', keywords: ['åŸå·´', 'Citybus'] },
  'æ–°å·´': { category: 'äº¤é€š', icon: 'ğŸšŒ', keywords: ['æ–°å·´', 'NWFB'] },
  'Tesla': { category: 'äº¤é€š', icon: 'ğŸš—', keywords: ['tesla', 'Tesla'] },
  
  // ğŸ” å¤–è³£å¹³å°
  'Foodpanda': { category: 'é¤é£²', icon: 'ğŸ”', keywords: ['foodpanda', 'Foodpanda', 'ç†Šè²“å¤–è³£'] },
  'Deliveroo': { category: 'é¤é£²', icon: 'ğŸ”', keywords: ['deliveroo', 'Deliveroo', 'æˆ·æˆ·é€'] },
  'æˆ·æˆ·é€': { category: 'é¤é£²', icon: 'ğŸ”', keywords: ['deliveroo', 'Deliveroo', 'æˆ·æˆ·é€'] },
  
  // ğŸ¬ å¨›æ¨‚ä¼‘é–’
  'Cinema': { category: 'å¨›æ¨‚', icon: 'ğŸ¬', keywords: ['cinema', 'Cinema', 'æˆ²é™¢'] },
  'ç™¾è€åŒ¯': { category: 'å¨›æ¨‚', icon: 'ğŸ¬', keywords: ['ç™¾è€åŒ¯', 'Broadway', 'ç™¾è€åŒ¯æˆ²é™¢'] },
  'MCL': { category: 'å¨›æ¨‚', icon: 'ğŸ¬', keywords: ['MCL', 'mcl', 'MCLæˆ²é™¢'] },
  'UA': { category: 'å¨›æ¨‚', icon: 'ğŸ¬', keywords: ['UA', 'ua', 'UAæˆ²é™¢'] },
  'Netflix': { category: 'å¨›æ¨‚', icon: 'ğŸ“º', keywords: ['netflix', 'Netflix'] },
  'Disney+': { category: 'å¨›æ¨‚', icon: 'ğŸ¬', keywords: ['disney', 'Disney+', 'Disney Plus'] },
  'Disney Plus': { category: 'å¨›æ¨‚', icon: 'ğŸ¬', keywords: ['disney', 'Disney+', 'Disney Plus'] },
  'Spotify': { category: 'å¨›æ¨‚', icon: 'ğŸµ', keywords: ['spotify', 'Spotify'] },
  'YouTube': { category: 'å¨›æ¨‚', icon: 'ğŸ“º', keywords: ['youtube', 'YouTube'] },
  'KTV': { category: 'å¨›æ¨‚', icon: 'ğŸ¤', keywords: ['KTV', 'ktv', 'å¡æ‹‰OK'] },
  'æµ·æ´‹å…¬åœ’': { category: 'å¨›æ¨‚', icon: 'ğŸ¢', keywords: ['æµ·æ´‹å…¬åœ’', 'Ocean Park'] },
  'è¿ªå£«å°¼': { category: 'å¨›æ¨‚', icon: 'ğŸ°', keywords: ['è¿ªå£«å°¼', 'Disneyland', 'è¿ªå£«å°¼æ¨‚åœ’'] },
  
  // âœˆï¸ æ—…éŠ
  'åœ‹æ³°': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['åœ‹æ³°', 'Cathay', 'cathay pacific'] },
  'Cathay': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['åœ‹æ³°', 'Cathay'] },
  'é¦™æ¸¯èˆªç©º': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['é¦™æ¸¯èˆªç©º', 'HK Express'] },
  'HK Express': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['hk express', 'HK Express'] },
  'Emirates': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['emirates', 'Emirates', 'é˜¿è¯é…‹'] },
  'é˜¿è¯é…‹èˆªç©º': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['emirates', 'é˜¿è¯é…‹'] },
  'Agoda': { category: 'æ—…è¡Œ', icon: 'ğŸ¨', keywords: ['agoda', 'Agoda'] },
  'Booking': { category: 'æ—…è¡Œ', icon: 'ğŸ¨', keywords: ['booking', 'Booking', 'Booking.com'] },
  'Trip.com': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['trip.com', 'Trip.com', 'æ”œç¨‹'] },
  'Airbnb': { category: 'æ—…è¡Œ', icon: 'ğŸ ', keywords: ['airbnb', 'Airbnb'] },
  'Expedia': { category: 'æ—…è¡Œ', icon: 'âœˆï¸', keywords: ['expedia', 'Expedia'] },
  
  // ğŸ‘— æœé£¾ç¾å®¹
  'Uniqlo': { category: 'å…¶ä»–', icon: 'ğŸ‘•', keywords: ['uniqlo', 'Uniqlo', 'å„ªè¡£åº«'] },
  'Zara': { category: 'å…¶ä»–', icon: 'ğŸ‘—', keywords: ['zara', 'Zara'] },
  'H&M': { category: 'å…¶ä»–', icon: 'ğŸ‘•', keywords: ['hm', 'H&M', 'H and M'] },
  'GU': { category: 'å…¶ä»–', icon: 'ğŸ‘•', keywords: ['gu', 'GU', 'æ¥µå„ª'] },
  'UNY': { category: 'å…¶ä»–', icon: 'ğŸ‘—', keywords: ['uny', 'UNY', 'å„ªè¡£åº«'] },
  'IKEA': { category: 'å…¶ä»–', icon: 'ğŸ›‹ï¸', keywords: ['ikea', 'IKEA'] },
  'Log-on': { category: 'å…¶ä»–', icon: 'ğŸ›ï¸', keywords: ['log-on', 'Log-on'] },
  'Colourmix': { category: 'å…¶ä»–', icon: 'ğŸ’„', keywords: ['colourmix', 'Colourmix', 'å¡èŠç¾'] },
  
  // ğŸ’¡ å…¬ç”¨äº‹æ¥­
  'æ°´è²»': { category: 'é›»è²»', icon: 'ğŸ’§', keywords: ['æ°´è²»', 'æ°´å‹™ç½²'] },
  'é›»è²»': { category: 'é›»è²»', icon: 'âš¡', keywords: ['é›»è²»', 'ä¸­é›»', 'æ¸¯ç‡ˆ', 'é›»è²»å–®'] },
  'ç…¤æ°£': { category: 'é›»è²»', icon: 'ğŸ”¥', keywords: ['ç…¤æ°£', 'ç…¤æ°£è²»', 'é¦™æ¸¯ä¸­è¯ç…¤æ°£'] },
  'ç…¤æ°£è²»': { category: 'é›»è²»', icon: 'ğŸ”¥', keywords: ['ç…¤æ°£', 'ç…¤æ°£è²»'] },
  
  // ğŸ“± é›»è¨Š
  'å¯¬é »': { category: 'é›»è¨Š', icon: 'ğŸŒ', keywords: ['å¯¬é »', 'å¯¬é »è²»', 'ç¶²è²»'] },
  'é›»è©±è²»': { category: 'é›»è¨Š', icon: 'ğŸ“±', keywords: ['é›»è©±è²»', 'æ‰‹æ©Ÿè²»', 'é›»è¨Šè²»'] },
  'é›»è¨Šç›ˆç§‘': { category: 'é›»è¨Š', icon: 'ğŸ“±', keywords: ['é›»è¨Šç›ˆç§‘', 'PCCW'] },
  'CSL': { category: 'é›»è¨Š', icon: 'ğŸ“±', keywords: ['csl', 'CSL', '1010'] },
  '1010': { category: 'é›»è¨Š', icon: 'ğŸ“±', keywords: ['1010', 'SmarTone'] },
  'SmarTone': { category: 'é›»è¨Š', icon: 'ğŸ“±', keywords: ['smartone', 'SmarTone'] },
  'ä¸­åœ‹ç§»å‹•': { category: 'é›»è¨Š', icon: 'ğŸ“±', keywords: ['ä¸­åœ‹ç§»å‹•', 'CMHK'] },
  '3HK': { category: 'é›»è¨Š', icon: 'ğŸ“±', keywords: ['3hk', '3HK', 'å’Œè¨˜é›»è¨Š'] },
  
  // ğŸ’Š å¥åº·
  'å±ˆè‡£æ°': { category: 'å¥åº·', icon: 'ğŸ’Š', keywords: ['å±ˆè‡£æ°', 'Watsons'] },
  'è¬å¯§': { category: 'å¥åº·', icon: 'ğŸ’Š', keywords: ['è¬å¯§', 'Mannings'] },
  'è—¥æˆ¿': { category: 'å¥åº·', icon: 'ğŸ’Š', keywords: ['è—¥æˆ¿', 'è—¥åº—'] },
  
  // ğŸ“š æ•™è‚²
  'æ›¸å±€': { category: 'æ•™è‚²', icon: 'ğŸ“š', keywords: ['æ›¸å±€', 'æ›¸åº—'] },
  'å•†å‹™å°æ›¸é¤¨': { category: 'æ•™è‚²', icon: 'ğŸ“š', keywords: ['å•†å‹™å°æ›¸é¤¨', 'Commercial Press'] },
  'å­¸ç¿’å ¡': { category: 'æ•™è‚²', icon: 'ğŸ“š', keywords: ['å­¸ç¿’å ¡', 'Learning Habitat'] },
  
  // ğŸ›ï¸ æ”¿åºœ/å…¬å…±æœå‹™
  'æ”¿åºœ': { category: 'æ”¿åºœ/å…¬å…±æœå‹™', icon: 'ğŸ›ï¸', keywords: ['æ”¿åºœ', 'ç¨…å‹™å±€', 'å·®é¤‰'] },
  'ç¨…å‹™å±€': { category: 'æ”¿åºœ/å…¬å…±æœå‹™', icon: 'ğŸ›ï¸', keywords: ['ç¨…å‹™å±€', 'ç¨…å–®'] },
};

// æœå°‹å•†æˆ¶
export function searchMerchant(query) {
  if (!query || query.length < 1) return [];
  
  const queryLower = query.toLowerCase();
  const results = [];
  
  // éæ­·æ‰€æœ‰å•†æˆ¶æ˜ å°„
  for (const [merchantName, data] of Object.entries(merchantMappings)) {
    // æª¢æŸ¥å•†æˆ¶åç¨±æ˜¯å¦åŒ…å«æŸ¥è©¢é—œéµå­—
    if (merchantName.toLowerCase().includes(queryLower) ||
        data.keywords.some(keyword => keyword.toLowerCase().includes(queryLower))) {
      results.push({
        name: merchantName,
        ...data
      });
    }
  }
  
  // æŒ‰ç›¸é—œæ€§æ’åºï¼ˆåç¨±å®Œå…¨åŒ¹é…çš„æ’å‰é¢ï¼‰
  results.sort((a, b) => {
    const aExact = a.name.toLowerCase() === queryLower;
    const bExact = b.name.toLowerCase() === queryLower;
    
    if (aExact && !bExact) return -1;
    if (!aExact && bExact) return 1;
    
    return a.name.localeCompare(b.name);
  });
  
  return results.slice(0, 5); // æœ€å¤šè¿”å›5å€‹çµæœ
}

// ç²å–å•†æˆ¶é¡åˆ¥
export function getMerchantCategory(merchantName) {
  const result = merchantMappings[merchantName];
  return result ? { category: result.category, icon: result.icon } : null;
}

// ç²å–æ‰€æœ‰å•†æˆ¶åç¨±ï¼ˆç”¨æ–¼ä¸‹æ‹‰é¸å–®ï¼‰
export function getAllMerchants() {
  return Object.keys(merchantMappings).sort();
}

// æ ¹æ“šè¼¸å…¥è‡ªå‹•åµæ¸¬å•†æˆ¶ï¼ˆç”¨æ–¼ç”¨æˆ¶è¼¸å…¥æ™‚è‡ªå‹•é¸æ“‡é¡åˆ¥ï¼‰
export function findMerchantByInput(input) {
  if (!input || input.length < 1) return null;
  
  const inputLower = input.toLowerCase();
  
  // é¦–å…ˆæª¢æŸ¥å®Œå…¨åŒ¹é…
  for (const [merchantName, data] of Object.entries(merchantMappings)) {
    if (merchantName.toLowerCase() === inputLower) {
      return { name: merchantName, ...data };
    }
  }
  
  // æª¢æŸ¥é—œéµå­—åŒ¹é…
  for (const [merchantName, data] of Object.entries(merchantMappings)) {
    if (data.keywords.some(kw => kw.toLowerCase() === inputLower)) {
      return { name: merchantName, ...data };
    }
  }
  
  // æª¢æŸ¥å•†æˆ¶åç¨±æ˜¯å¦åŒ…å«è¼¸å…¥ï¼ˆéƒ¨åˆ†åŒ¹é…ï¼‰
  for (const [merchantName, data] of Object.entries(merchantMappings)) {
    if (merchantName.toLowerCase().includes(inputLower) || 
        data.keywords.some(kw => kw.toLowerCase().includes(inputLower))) {
      return { name: merchantName, ...data };
    }
  }
  
  return null;
}
